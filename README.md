# Final Project - Embedded System Lab 2/2022
Final project for Embedded System Lab 2/2022 

Group สวัสดีวันอังคาร

Members :
- Jirayut Phothawilkiat
- Sorawit Kamphoi
- Werapat Wangrungroj
- Nattapong Anansomsin

Website : [Website Final Project Embedded](https://final-project-embedded.netlify.app/)


Report / Documentation : [Report](Embedded%20Final%20Report.pdf)

<br>

## Project Overview

<p align="center">
  <img src="https://lh3.googleusercontent.com/d/1GPeh3sUcS0XwVEy3grJ57jjEjLTvWKHB">
</p>

โครงงานนี้มีจุดประสงค์เพื่อลดปริมาณฝุ่นที่สะสมอยู่ในอากาศและอำนวยความสะดวกสบายให้แก่ผู้ใช้โดยลดอุณหภูมิของอากาศด้วยน้ำ โดยนำ sensor มาใช้เพื่อวัดปริมาณฝุ่น อุณหภูมิของอากาศ และความชื้นในอากาศ เพื่อให้พัดลมกรองฝุ่นทำงานตามสภาพอากาศ และใช้น้ำเพื่อลดอุณหภูมิของอากาศ พร้อมทั้งแสดงปริมาณฝุ่น อุณหภูมิ และความชื้นด้วยกราฟ ทั้งนี้ผู้ใช้สามารถตั้งค่าให้อุปกรณ์ทำงานด้วยตัวเองแบบอัตโนมัติหรือควบคุมอุปกรณ์ด้วยตัวเองได้ตามต้องการผ่านทางเว็บไซต์

## System Architecture

<p align="center">
  <img src="https://lh3.googleusercontent.com/d/1bqhGofKZ-cF069ahwtKIcvyixinG7_jm">
</p>

โครงงานนี้ใช้ STM32 NUCLEO-F411RE เป็น microcontroller ในการควบคุมพัดลมและปั้มน้ำผ่าน H-Bridge และต่อ sensor 3 ตัวได้แก่ temperature & humidity sensor (DHT11), dust sensor (SHARP GP2Y1010AU0F), และ ultrasonic sensor (HC-SR04) ข้อมูลจากเซนเซอร์ต่างๆจะส่งมายัง NodeMCU ผ่านทาง UART

เราใช้ NodeMCU เพื่อเชื่อมต่อกับ wifi เพื่อทำให้สามารถส่งข้อมูลและรับข้อมูลจาก NETPIE ได้ผ่านทาง MQTT protocol

ทั้งนี้เราสามารถดูข้อมูลจากอุปกรณ์รวมถึงควบคุมอุปกรณ์ได้ผ่านทาง web application ซึ่งเชื่อมต่อ NETPIE ด้วย RESTful API

## Device Principle

อุปกรณ์จะอ่านค่าอุณหภูมิ, ความชื้นและระยะทางทุกๆ 200 มิลลิวินาที และหาค่าปริมาณฝุ่นเฉลี่ยโดยการอ่านค่าปริมาณฝุ่นทุกๆ 100 มิลลิวินาที เป็นจำนวน 50 ครั้งแล้วนำมาเฉลี่ยทุกๆ 10 วินาที

อุปกรณ์มีสองรูปแบบการทำงาน ได้แก่รูปแบบอัตโนมัติและรูปแบบควบคุมด้วยตัวเอง

ในรูปแบบอัตโนมัติอุปกรณ์จะมีลักษณะการทำงานดังนี้
1.	เมื่อมีการทำงานความเร็วพัดลมขั้นต่ำจะอยู่ที่ 50%
2.	ความเร็วพัดลมจะปรับอัตโนมัติตามอุณหภูมิและค่าปริมาณฝุ่นในขณะนั้น โดยเมื่ออุณหภูมิมากกว่า 25 องศาเซลเซียส หรือ ปริมาณฝุ่นมากกว่า 5 ไมโครกรัมต่อลูกบาศก์เมตร อุปกรณ์จะปรับความแรงพัดลมขึ้นทีละ 1% จนถึง 100% หรือจนกว่าอุณหภูมิจะน้อยกว่าเท่ากับ 25 องศาเซลเซียส และ ปริมาณฝุ่นน้อยกว่าเท่ากับ 5 ไมโครกรัมต่อลูกบาศก์เมตร 
3.	เมื่ออุณหภูมิน้อยกว่าเท่ากับ 25 องศาเซลเซียส และ ปริมาณฝุ่นน้อยกว่าเท่ากับ 5 ไมโครกรัมต่อลูกบาศก์เมตร ความเร็วพัดลมจะถูกปรับเป็น 50%
4.	ปั๊มน้ำจะทำงานเมื่อความชื้นน้อยกว่าเท่ากับ 75% และหยุดทำงานเมื่อความชื้นมากกว่าเท่ากับ 80% โดยปั๊มน้ำจะมีความแรงคงที่อยู่ที่ 5%
5.	ถ้าไม่มีการเคลื่อนไหวมากกว่า 1 นาทีจะหยุดการทำงานของพัดลมและปั๊มน้ำ โดยจะถือว่าไม่มีการเคลื่อนไหวเมื่อค่าระยะทางมากกว่า 50 เซนติเมตร

ในรูปแบบควบคุมด้วยตัวเองผู้ใช้จะสามารถปรับความเร็วพัดลมได้ตั้งแต่ 0% ถึง 100% และสามารถควบคุมการเปิดปิดของปั๊มน้ำได้

## Website and Features

ข้อมูลของประมาณฝุ่น อุณหภูมิ และความชื้น รวมทั้งสถานะของอุปกรณ์และการตั้งค่าต่างๆสามารถดูได้ในเว็บไซต์ [https://final-project-embedded.netlify.app](https://final-project-embedded.netlify.app ) โดยเว็บไซต์ถูกเขียนด้วย react framework และเชื่อมต่อกับ NETPIE 2020 ผ่าน RESTful API

รายละเอียดเกี่ยวกับเว็บไซต์โปรดอ่านใน report



<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<p align="center">
FC Ajarn Yam Krub
</p>

<p align="center">
  <img src="https://lh3.googleusercontent.com/d/1NP3pQW7HnPy5UTuwNvI3Lh0eRYXzwu7Z">
</p>
